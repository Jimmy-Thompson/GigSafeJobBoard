1) Migration (Postgres)
Create scripts/add_user_submitted_jobs_postalcode.sql:

ALTER TABLE user_submitted_jobs
  ADD COLUMN IF NOT EXISTS postalcode text;
Run once in Replit:

psql "$DB_URL" -f scripts/add_user_submitted_jobs_postalcode.sql
2) XML export script
Create scripts/export_user_jobs_xml.js:

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';
import { Client } from 'pg';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const config = {
  publisher: process.env.XML_PUBLISHER ?? 'GigSafe',
  publisherUrl: process.env.XML_PUBLISHER_URL ?? 'https://www.gigsafe.com/',
  notificationEmail: process.env.XML_NOTIFICATION_EMAIL ?? 'jimmy@gigsafe.com',
  country: process.env.XML_DEFAULT_COUNTRY ?? 'US',
  jobType: process.env.XML_DEFAULT_JOBTYPE ?? 'Pt. Time/Contract',
  category: process.env.XML_DEFAULT_CATEGORY ?? 'Logistics',
  baseUrl: process.env.XML_BASE_URL ?? 'https://gigsafe-jobboard.replit.app',
  outputPath: process.env.XML_OUTPUT_PATH ?? path.join(__dirname, '..', 'App', 'user_jobs_feed.xml')
};

function escapeXml(value) {
  return String(value)
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&apos;');
}

function cdata(value) {
  const text = value === null || value === undefined ? '' : String(value);
  return `<![CDATA[${text.replace(/]]>/g, ']]]]><![CDATA[>')}]]>`;
}

function formatDate(value) {
  const date = value ? new Date(value) : new Date();
  return date.toISOString().replace('T', ' ').replace(/\.\d{3}Z$/, '');
}

function warnIfDefault(label, value, fallback) {
  if (value === fallback) {
    console.warn(`Warning: ${label} is using the default '${fallback}'. Set ${label} to override.`);
  }
}

warnIfDefault('XML_PUBLISHER', config.publisher, 'GigSafe');
warnIfDefault('XML_PUBLISHER_URL', config.publisherUrl, 'https://www.gigsafe.com/');
warnIfDefault('XML_NOTIFICATION_EMAIL', config.notificationEmail, 'jimmy@gigsafe.com');
warnIfDefault('XML_DEFAULT_COUNTRY', config.country, 'US');
warnIfDefault('XML_DEFAULT_JOBTYPE', config.jobType, 'Pt. Time/Contract');
warnIfDefault('XML_DEFAULT_CATEGORY', config.category, 'Logistics');
warnIfDefault('XML_BASE_URL', config.baseUrl, 'https://gigsafe-jobboard.replit.app');

async function main() {
  if (!process.env.DB_URL) {
    throw new Error('DB_URL is required to export the XML feed.');
  }

  const client = new Client({ connectionString: process.env.DB_URL });
  await client.connect();

  const result = await client.query(`
    SELECT
      id,
      title,
      submitted_at,
      company,
      address,
      city,
      state,
      description,
      postalcode
    FROM user_submitted_jobs
    WHERE hidden = false
      AND (submitted_at IS NULL OR submitted_at > NOW() - INTERVAL '24 hours')
    ORDER BY submitted_at DESC, id DESC
  `);

  const lines = [];
  lines.push('<?xml version="1.0" encoding="UTF-8"?>');
  lines.push('<source>');
  lines.push(`  <publisher>${escapeXml(config.publisher)}</publisher>`);
  lines.push(`  <publisherurl>${escapeXml(config.publisherUrl)}</publisherurl>`);

  let included = 0;
  for (const job of result.rows) {
    const missing = [];
    if (!job.title) missing.push('title');
    if (!job.submitted_at) missing.push('submitted_at');
    if (!config.baseUrl) missing.push('base_url');
    if (!job.company) missing.push('company');
    if (!job.city) missing.push('city');
    if (!job.state) missing.push('state');
    if (!job.postalcode) missing.push('postalcode');
    if (!job.description) missing.push('description');

    if (missing.length > 0) {
      console.warn(`Skipping job ${job.id}: missing ${missing.join(', ')}`);
      continue;
    }

    const jobUrl = `${config.baseUrl.replace(/\/$/, '')}/jobs/${job.id}`;
    lines.push('  <job>');
    lines.push(`    <title>${cdata(job.title)}</title>`);
    lines.push(`    <date>${cdata(formatDate(job.submitted_at))}</date>`);
    lines.push(`    <referencenumber>${cdata(job.id)}</referencenumber>`);
    lines.push(`    <url>${cdata(jobUrl)}</url>`);
    lines.push(`    <company>${cdata(job.company)}</company>`);
    lines.push(`    <address>${cdata(job.address ?? '')}</address>`);
    lines.push(`    <city>${cdata(job.city)}</city>`);
    lines.push(`    <state>${cdata(job.state)}</state>`);
    lines.push(`    <country>${cdata(config.country)}</country>`);
    lines.push(`    <postalcode>${cdata(job.postalcode)}</postalcode>`);
    lines.push(`    <description>${cdata(job.description)}</description>`);
    lines.push(`    <jobtype>${cdata(config.jobType)}</jobtype>`);
    lines.push(`    <category>${cdata(config.category)}</category>`);
    lines.push(`    <notification>${cdata(config.notificationEmail)}</notification>`);
    lines.push('  </job>');
    included += 1;
  }

  lines.push('</source>');

  fs.mkdirSync(path.dirname(config.outputPath), { recursive: true });
  fs.writeFileSync(config.outputPath, lines.join('\n'), 'utf-8');

  console.log(`Wrote ${included} jobs to ${config.outputPath}`);
  await client.end();
}

main().catch((error) => {
  console.error('XML export failed:', error);
  process.exit(1);
});
3) Add to api-server.js

At the top imports, add:
import { spawn } from 'child_process';
import { Client } from 'pg';
After the sanitizers, add helpers + XML export + landing page renderer (paste as-is):
const XML_EXPORT_INTERVAL_MS = Number(process.env.XML_EXPORT_INTERVAL_MS ?? 15 * 60 * 1000);
let xmlExportInProgress = false;
let xmlExportTimer = null;

function escapeHtml(value) { return String(value ?? '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;'); }
function formatTimestamp(value) { const date = value ? new Date(value) : new Date(); return date.toISOString().replace('T',' ').replace(/\.\d{3}Z$/, ''); }

function runXmlExport(reason) {
  if (!process.env.DB_URL) return;
  if (xmlExportInProgress) { console.log(`[xml-export] Skip (${reason}) - already running`); return; }
  const scriptPath = path.join(__dirname, 'scripts', 'export_user_jobs_xml.js');
  xmlExportInProgress = true;
  const child = spawn(process.execPath, [scriptPath], { env: process.env, stdio: ['ignore','pipe','pipe'] });
  child.stdout.on('data', d => console.log(`[xml-export] ${d.toString().trim()}`));
  child.stderr.on('data', d => console.error(`[xml-export] ${d.toString().trim()}`));
  child.on('close', code => { xmlExportInProgress = false; if (code !== 0) console.error(`[xml-export] failed with code ${code}`); });
}

async function fetchUserJobFromPostgres(jobId) {
  const client = new Client({ connectionString: process.env.DB_URL });
  await client.connect();
  try {
    const result = await client.query(
      `SELECT
        id, title, company, city, state, postalcode, address, description, pay,
        general_requirements, benefits, vehicle_requirements, insurance_requirement,
        certifications_required, schedule_details, submitted_at
       FROM user_submitted_jobs
       WHERE id = $1
         AND hidden = false
         AND (submitted_at IS NULL OR submitted_at > NOW() - INTERVAL '24 hours')
       LIMIT 1`,
      [jobId]
    );
    return result.rows[0] ?? null;
  } finally {
    await client.end();
  }
}

function fetchUserJobFromSqlite(jobId) {
  const userDb = getUserDb();
  return userDb.prepare(`
    SELECT
      id, title, company, city, state, postalcode, address, description, pay,
      general_requirements, benefits, vehicle_requirements, insurance_requirement,
      certifications_required, schedule_details, submitted_at
    FROM jobs
    WHERE id = ?
      AND hidden = 0
      AND (submitted_at IS NULL OR datetime(submitted_at) > datetime('now', '-24 hours'))
    LIMIT 1
  `).get(jobId);
}

function renderJobDetailPage(job) {
  const locationParts = [job.address, job.city, job.state, job.postalcode].filter(Boolean);
  const locationText = locationParts.length ? locationParts.join(', ') : 'Location not specified';
  return `<!doctype html><html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>${escapeHtml(job.title)} - GigSafe Job Board</title>
<link rel="preconnect" href="https://fonts.googleapis.com" /><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet" />
<style>/* minimal styles omitted for brevity, use the card layout shown earlier */</style>
</head><body>...${escapeHtml(job.title)}...${escapeHtml(locationText)}...${escapeHtml(formatTimestamp(job.submitted_at))}...</body></html>`;
}
(Use the full HTML from earlier if you want the exact styling.)

Add the route (near other routes):
app.get('/jobs/:id', async (req, res) => {
  const jobId = Number.parseInt(req.params.id);
  if (!jobId || Number.isNaN(jobId)) return res.status(404).send('Job not found');
  try {
    const job = process.env.DB_URL ? await fetchUserJobFromPostgres(jobId) : fetchUserJobFromSqlite(jobId);
    if (!job) return res.status(404).send('Job not found');
    res.setHeader('Content-Type', 'text/html; charset=utf-8');
    res.send(renderJobDetailPage(job));
  } catch (err) {
    console.error('Error loading job detail page:', err);
    res.status(500).send('Failed to load job');
  }
});
Trigger XML export after post/delete/hide (in respective handlers):

After successful POST /api/jobs: runXmlExport('job_posted');
After DELETE /api/jobs/:id: runXmlExport('job_deleted');
After PATCH hide/unhide: runXmlExport('job_visibility_changed');
Schedule export on startup (near the bottom):

function scheduleXmlExport() {
  if (!process.env.DB_URL) return;
  runXmlExport('startup');
  xmlExportTimer = setInterval(() => runXmlExport('interval'), XML_EXPORT_INTERVAL_MS);
}
initializeUserJobsDb();
scheduleXmlExport();

process.on('SIGINT', () => {
  if (xmlExportTimer) clearInterval(xmlExportTimer);
  closeDb();
  process.exit(0);
});
4) Run in Replit

Pull/refresh code after pasting.
npm install (if needed).
psql "$DB_URL" -f scripts/add_user_submitted_jobs_postalcode.sql
DB_URL="$DB_URL" npm run export:user-xml (creates App/user_jobs_feed.xml, served at /user_jobs_feed.xml)
Restart (npm start or Run).
Thatâ€™s all you need to paste to get the landing pages and XML feed working.